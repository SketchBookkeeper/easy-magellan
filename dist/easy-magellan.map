{"version":3,"sources":["src/utils.js","src/magellan.js","index.js"],"names":["debounce","extend","removeClassFromAll","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","extended","deep","i","Object","prototype","toString","call","merge","obj","prop","hasOwnProperty","length","items","className","classList","remove","animateScrollTo","destination","destinationToScrollTo","offsetTop","window","scroll","scrollTo","runAnimateScrollTo","event","target","contains","preventDefault","contentID","String","getAttribute","replace","content","document","getElementById","optionalArgument","parseInt","dataset","magellanScrollTo","addEventListener","Magellan","contentSelector","linkSelector","options","defaults","activeLinkClass","BuildMagellan","publicAPIs","settings","runMagellan","contents","createObserver","element","threshold","observer","IntersectionObserver","handleIntersect","observe","entries","forEach","entry","isIntersecting","deactivateAllLinks","activeItem","determineActiveContent","activateContentsLink","map","windowTop","scrollY","contendID","querySelector","add","links","querySelectorAll","destroy","init"],"mappings":"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","file":"easy-magellan.map","sourcesContent":["/**\n * UTILITIES\n */\n\n/**\n * Debounce\n */\nexport function debounce(func, wait = 20, immediate = true) {\n\tvar timeout;\n\treturn function () {\n\n\t\tvar context = this,\n\t\t\targs = arguments;\n\n\t\tvar later = function () {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) func.apply(context, args);\n\t\t};\n\n\t\tvar callNow = immediate && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\n\t\tif (callNow) func.apply(context, args);\n\t};\n};\n\n\n/**\n * Merge Two Objects\n */\nexport function extend() {\n\tlet extended = {};\n\tlet deep = false;\n\tlet i = 0;\n\n\t// Check if a deep merge\n\tif (Object.prototype.toString.call(arguments[0]) === \"[object Boolean]\") {\n\t\tdeep = arguments[0];\n\t\ti++;\n\t}\n\n\t// Merge the object into the extended object\n\tvar merge = function (obj) {\n\t\tfor (var prop in obj) {\n\t\t\tif (obj.hasOwnProperty(prop)) {\n\t\t\t\t// If property is an object, merge properties\n\t\t\t\tif (\n\t\t\t\t\tdeep &&\n\t\t\t\t\tObject.prototype.toString.call(obj[prop]) === \"[object Object]\"\n\t\t\t\t) {\n\t\t\t\t\textended[prop] = extend(extended[prop], obj[prop]);\n\t\t\t\t} else {\n\t\t\t\t\textended[prop] = obj[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t// Loop through each object and conduct a merge\n\tfor (; i < arguments.length; i++) {\n\t\tvar obj = arguments[i];\n\t\tmerge(obj);\n\t}\n\n\treturn extended;\n};\n\n/**\n * Remove class from all elements passed\n */\nexport function removeClassFromAll(items, className) {\n\n\t//TODO some check\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\titems[i].classList.remove(className);\n\t}\n}\n","//--------------------------------------------------------------\n// MAGELLAN NAV\n//--------------------------------------------------------------\n\nimport {extend, removeClassFromAll} from './utils';\n\n//------------------------------\n// Animated Scroll To\n//------------------------------\nfunction animateScrollTo(destination) {\n\tconst destinationToScrollTo = typeof destination === 'number' ? destination : destination.offsetTop;\n\n\tif ('scrollTo' in window === false) {\n\t\twindow.scroll(0,destinationToScrollTo);\n\t\treturn;\n\t}\n\n\twindow.scrollTo({\n\t\t'behavior': 'smooth',\n\t\t'top': destinationToScrollTo,\n\t})\n}\n\nfunction runAnimateScrollTo() {\n\tif (!event.target.classList.contains('js-magellan-link')) return;\n\tevent.preventDefault();\n\n\tlet contentID = String(event.target.getAttribute('href'));\n\tcontentID = contentID.replace('#', '');\n\n\tlet content = document.getElementById(contentID);\n\n\tconst optionalArgument = parseInt(event.target.dataset.magellanScrollTo);\n\tif (optionalArgument !== null && optionalArgument >= 0) {\n\t\tanimateScrollTo(optionalArgument);\n\t\treturn;\n\t}\n\n\tif(!content) return;\n\n\tanimateScrollTo(content);\n}\n\ndocument.addEventListener('click', runAnimateScrollTo, false);\n\n\n//------------------------------\n// Magellan\n//------------------------------\nexport const Magellan = (function(contentSelector, linkSelector, options) {\n\tlet defaults = {\n\t\tactiveLinkClass: 'is-active',\n\t}\n\n\t// Constructor\n\tconst BuildMagellan = function(contentSelector, linkSelector, options) {\n\t\tlet publicAPIs = {};\n\t\tlet settings;\n\n\t\t// Private Methods\n\t\tconst runMagellan = function(contents) {\n\n\t\t\tfunction createObserver(element) {\n\t\t\t\tconst options = {\n\t\t\t\t\tthreshold: 1,\n\t\t\t\t}\n\n\t\t\t\tconst observer = new IntersectionObserver(handleIntersect, options);\n\n\t\t\t\tobserver.observe(element);\n\t\t\t}\n\n\t\t\tfunction handleIntersect(entries, observer) {\n\t\t\t\tentries.forEach(function(entry) {\n\t\t\t\t\tif (entry.isIntersecting) {\n\t\t\t\t\t\tpublicAPIs.deactivateAllLinks();\n\t\t\t\t\t\tconst activeItem = determineActiveContent(contents);\n\t\t\t\t\t\tactivateContentsLink(activeItem);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcontents.map(content => {\n\t\t\t\tcreateObserver(content);\n\t\t\t});\n\t\t}\n\n\t\tconst determineActiveContent = function(contents) {\n\t\t\tconst windowTop = window.scrollY;\n\n\t\t\tfor (let i = 0; i < contents.length; i++) {\n\t\t\t\tif (contents[i].offsetTop >= windowTop) {\n\t\t\t\t\treturn contents[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tconst activateContentsLink =function(content) {\n\t\t\tconst contendID = content.getAttribute('id');\n\t\t\tconst activeItem = document.querySelector(`[href=\"#${contendID}\"]`);\n\n\t\t\tif (!activeItem) return;\n\t\t\tactiveItem.classList.add(settings.activeLinkClass);\n\t\t}\n\n\t\t// Public API\n\t\tpublicAPIs.deactivateAllLinks = function() {\n\t\t\tconst links    = [...document.querySelectorAll(linkSelector)];\n\t\t\tremoveClassFromAll(links, settings.activeLinkClass);\n\t\t}\n\n\t\tpublicAPIs.destroy = function() {\n\n\t\t}\n\n\t\tpublicAPIs.init = function(options) {\n\t\t\tsettings = extend(defaults, options || {});\n\n\t\t\tconst contents = [...document.querySelectorAll(contentSelector)];\n\t\t\tconst links    = [...document.querySelectorAll(linkSelector)];\n\n\t\t\tif (!contents || !links) return;\n\n\t\t\twindow.addEventListener('load', () => {\n\t\t\t\trunMagellan(contents);\n\t\t\t});\n\t\t}\n\n\t\tpublicAPIs.init(options);\n\n\t\treturn publicAPIs;\n\t}\n\n\treturn BuildMagellan;\n})(window, document);\n","import {Magellan} from './src/magellan.js';\n\nwindow.Magellan = Magellan;\n\n\n"]}